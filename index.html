<!DOCTYPE html>
<html>
<head>
    <title>Expense System - Login</title>
</head>
<body>
    <h1>Expense System</h1>
    <p>Silakan login untuk mengakses aplikasi.</p>
    
    <!-- Tombol Login/Logout -->
    <div style="position: fixed; top: 10px; right: 10px;">
      <button id="login-btn">Login</button>
      <button id="logout-btn" style="display: none;">Logout</button>
    </div>
    
    <div id="dashboard-link" style="display: none; margin-top: 20px;">
      <a href="Dashboard.html">Lanjut ke Dashboard â†’</a>
    </div>

    <!-- Widget Identity Netlify -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script>
      netlifyIdentity.init();
      
      function updateUI() {
        const user = netlifyIdentity.currentUser();
        const loginBtn = document.getElementById('login-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const dashboardLink = document.getElementById('dashboard-link');
        
        if (user) {
          loginBtn.style.display = 'none';
          logoutBtn.style.display = 'block';
          dashboardLink.style.display = 'block';
          console.log('Logged in as:', user.email);
        } else {
          loginBtn.style.display = 'block';
          logoutBtn.style.display = 'none';
          dashboardLink.style.display = 'none';
        }
      }

      document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('login-btn').addEventListener('click', () => {
          netlifyIdentity.open();
        });

        document.getElementById('logout-btn').addEventListener('click', () => {
          netlifyIdentity.logout();
        });

        updateUI();
      });

      netlifyIdentity.on('login', (user) => {
        console.log('Login success');
        updateUI();
      });

      netlifyIdentity.on('logout', () => {
        console.log('Logout success');
        updateUI();
      });
    </script>
</body>
</html>